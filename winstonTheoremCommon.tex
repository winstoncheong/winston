%% Common theorem setup

\usepackage{amsthm,thmtools}
\usepackage[framemethod=TikZ]{mdframed}
\usetikzlibrary{shadows}
% https://tex.stackexchange.com/a/292090/76888
% https://github.com/marcodaniel/mdframed/issues/12
% \xpatchcmd{\endmdframed}
%   {\aftergroup\endmdf@trivlist\color@endgroup}
%   {\endmdf@trivlist\color@endgroup\@doendpe}
%   {}{}

\mdfdefinestyle{mdbluebox}{%
  roundcorner = 10pt,
  linewidth=1pt,
  skipabove=12pt,
  innerbottommargin=9pt,
  skipbelow=2pt,
  linecolor=blue,
  nobreak=true,
  backgroundcolor=TealBlue!5,
}
\declaretheoremstyle[
  headfont=\sffamily\bfseries\color{MidnightBlue},
  mdframed={style=mdbluebox},
  headpunct={\\[3pt]},
  postheadspace={0pt}
]{thmbluebox}

\mdfdefinestyle{mdredbox}{%
  linewidth=0.5pt,
  skipabove=12pt,
  frametitleaboveskip=5pt,
  frametitlebelowskip=0pt,
  skipbelow=2pt,
  frametitlefont=\bfseries,
  innertopmargin=4pt,
  innerbottommargin=8pt,
  nobreak=true,
  backgroundcolor=Salmon!5,
  linecolor=RawSienna,
}
\declaretheoremstyle[
  headfont=\bfseries\color{RawSienna},
  mdframed={style=mdredbox},
  headpunct={\\[3pt]},
  postheadspace={0pt},
]{thmredbox}

\mdfdefinestyle{mdgreenbox}{%
  skipabove=8pt,
  linewidth=2pt,
  rightline=false,
  leftline=true,
  topline=false,
  bottomline=false,
  linecolor=ForestGreen,
backgroundcolor=ForestGreen!5,
}
\declaretheoremstyle[
  headfont=\bfseries\sffamily\color{ForestGreen!70!black},
  bodyfont=\normalfont,
  spaceabove=2pt,
  spacebelow=1pt,
  mdframed={style=mdgreenbox},
  headpunct={ --- },
]{thmgreenbox}

\mdfdefinestyle{mdblackbox}{%
  skipabove=8pt,
  linewidth=3pt,
  rightline=false,
  leftline=true,
  topline=false,
  bottomline=false,
  linecolor=black,
  backgroundcolor=RedViolet!5!gray!5,
}
\declaretheoremstyle[
  headfont=\bfseries,
  bodyfont=\normalfont\small,
  spaceabove=0pt,
  spacebelow=0pt,
  mdframed={style=mdblackbox}
]{thmblackbox}

\mdfdefinestyle{mdpurplebox}{%
  roundcorner=10pt,
  linewidth=1pt,
  skipabove=12pt,
  skipbelow=12pt,
  innertopmargin=9pt,
  innerbottommargin=9pt,
  linecolor=black,
  nobreak=true,
  backgroundcolor=Orchid!10,
  shadow=true,
  shadowsize=6pt,
  shadowcolor=black!30,
  frametitleaboveskip=8pt,
  frametitlebelowskip=8pt,
  frametitlebackgroundcolor=Violet!50!black,
  frametitlefont=\bfseries\sffamily\color{white},
  frametitlerule=true,
}
\declaretheoremstyle[
  headfont=\bfseries,
  bodyfont=\normalfont\small,
  spaceabove=0pt,
  spacebelow=0pt,
  mdframed={style=mdpurplebox}
]{thmpurplebox}

\declaretheoremstyle[
  headfont=\color{blue!40!black}\normalfont\bfseries,
  spaceabove=8pt,
  spacebelow=8pt,
  bodyfont=\normalfont
]{basehead}

\mdfdefinestyle{exercisemdfstyle}{%
  %skipabove=8pt,
  %skipbelow=2pt,
  %nobreak=true,
  innerbottommargin=8pt,
  linewidth=1pt,
  rightline=false,
  leftline=true,
  topline=true,
  bottomline=false,
  linecolor=ForestGreen,
  backgroundcolor=RedViolet!5!gray!5,
}
\declaretheoremstyle[
  headfont=\bfseries\color{ForestGreen!80!black},
  bodyfont=\normalfont,
%  spaceabove=0pt,
%  spacebelow=0pt,
  mdframed={style=exercisemdfstyle}
]{exercisethmstyle}

\mdfdefinestyle{solutionmdfstyle}{%
  %skipabove=8pt,
  %skipbelow=2pt,
  %nobreak=true,
  innerbottommargin=8pt,
  linewidth=1pt,
  rightline=true,
  leftline=false,
  topline=false,
  bottomline=true,
  linecolor=MidnightBlue,
  %backgroundcolor=RedViolet!5!gray!5,
}
\declaretheoremstyle[
  headfont=\bfseries\color{MidnightBlue},
  bodyfont=\normalfont,
%  spaceabove=0pt,
%  spacebelow=0pt,
  mdframed={style=solutionmdfstyle}
]{solutionthmstyle}